<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>asitynormalny</title>
<!-- Favicon PNG -->
<link rel="icon" type="image/png" href="faviconsi.png?v=2">
<link rel="apple-touch-icon" href="faviconsi.png?v=2">
    <!-- Apple touch icon (pre Add to Home Screen) -->
<link rel="apple-touch-icon" href="faviconsi.png">

<!-- Open Graph meta tag pre Instagram, WhatsApp, FB atƒè. -->
<meta property="og:image" content="faviconsi.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="512">
<meta property="og:image:height" content="512">
<meta property="og:title" content="asitynormalny">
<meta property="og:description" content="asitynormalny">
<meta property="og:url" content="https://asitynormalny.com">
<meta name="robots" content="noimageindex">
<style>

    header img#logo {
      width: 80%;
      max-width: 600px;
      height: auto;
      display: block;
      margin: 0 auto;
      -webkit-user-drag: none;
      -webkit-touch-callout: none;
      user-select: none;
      pointer-events: none;
    }

#shopSection {
  background: url('background.jpg') no-repeat center center fixed ; /* obr√°zok, centrovan√Ω a fixn√Ω */
  background-size: cover; /* automatick√© prisp√¥sobenie obrazovke */
  min-height: 100vh; /* aspo≈à v√Ω≈°ka celej obrazovky */
  padding: 5px 6px; /* medzery okolo produktov */
  box-sizing: border-box; /* zahrnie padding do v√Ω≈°ky/≈°√≠rky */
}

#shopSection {
  background: url('background.webp') no-repeat center center fixed;
  background-size: cover;
  min-height: 100vh;
  padding: 5px 6px;
  box-sizing: border-box;
}

    @media (max-width: 900px) {
      header img#logo {
        width: 108%;
        max-width: none;
        height: 108%;
      }
    }
body { font-family:sans-serif; margin:0; padding:0; background:#fff; color:#fff; text-align:center;}
header { padding:15px 20px; background:#111; display:flex; justify-content:center; align-items:center; gap:20px; position:relative;}
header img { max-width:600px; height:auto; cursor:pointer; }
.navbar { display:flex; justify-content:center; gap:20px; margin:15px 0; }
.navbar button { padding:10px 20px; font-size:16px; cursor:pointer; background:#222; color:#fff; border:none; border-radius:5px; }
.navbar button.active { background:#6772e5; }
.section {
  display: none;
  opacity: 0;
  transform: translateX(50px); /* posun doprava */
  transition: opacity 0.5s ease, transform 0.5s ease;
}

.section.active {
  display: block;
  opacity: 1;
  transform: translateX(0);
}
.product{margin:25px auto 30px auto; background:#111; padding:20px; max-width:400px; box-shadow:0 2px 5px rgba(255,255,255,0.2); border-radius:10px;}
.carousel{position:relative; margin-bottom:15px; display:flex; justify-content:center; align-items:center;}
.carousel img{max-width:100%; display:block; border-radius:5px; cursor:pointer;}
.arrow{position:absolute; top:50%; transform:translateY(-50%); font-size:30px; color:#fff; cursor:pointer; background:rgba(0,0,0,0.4); padding:5px 10px; border-radius:5px; user-select:none;}
.arrow.left{left:5px;} 
.arrow.right{right:5px;}
.size-container, .qty-container{margin:15px 0; text-align:center;}
.size-container select, .qty-container select{width:50%; padding:10px; font-size:16px; border-radius:5px; border:none; text-align:center;}
.product button{padding:10px 20px; font-size:16px; cursor:pointer; background:#6772e5; color:#fff; border:none; border-radius:5px; margin-top:10px;}
.cart-container { text-align:center; display:flex; flex-direction:column; align-items:center; }
.cart-price{ font-size:14px; color:#0f0; margin-top:5px; }
.cart-icon{ font-size:24px; cursor:pointer; margin-top:5px; }
.cart-modal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:999; justify-content:center; align-items:center;}
.cart{background:#111; padding:15px 20px; max-width:350px; width:80%; border-radius:10px; box-shadow:0 2px 10px rgba(255,255,255,0.3); position:relative; text-align:center; max-height:85vh; overflow-y:auto;-webkit-overflow-scrolling: touch; /* plynul√Ω scroll na iOS */}
.cart input, .cart select, .cart textarea{width:90%; padding:8px; margin:5px 0; font-size:14px; border-radius:4px; border:none;}
.cart textarea{resize:vertical; min-height:50px;}
.cart button{padding:10px 16px; font-size:15px; cursor:pointer; background:#6772e5; color:#fff; border:none; border-radius:5px; margin-top:10px;}
.close-btn{position:absolute; top:10px; right:15px; font-size:35px; color:#fff; cursor:pointer;}
.remove-item{cursor:pointer; color:red; margin-left:8px; font-weight:bold;}
label{display:block; margin-top:6px;}
.lightbox {
  display: none;
  position: fixed;
  inset: 0; /* shorthand pre top:0; right:0; bottom:0; left:0 */
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  justify-content: center;
  align-items: center;
  z-index: 1000;
  flex-direction: column;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

/* Kontajner pre obr√°zok + kr√≠≈æik */
.lightbox-content {
  position: relative;
  display: inline-block;
  max-width: 90vw;
  max-height: 90vh;
}

/* Obr√°zok */
.lightbox-content img {
  width: auto;
  height: auto;
  max-width: 100%;
  max-height: 100%;
  border-radius: 5px;
  display: block;
  position: relative;
  z-index: 1005;
  object-fit: contain;
}

/* Kr√≠≈æik */
.lightbox-content .close-lightbox {
  position: absolute;
  top: -5px;
  right: 3px;
  font-size: 38px;
  line-height: 1;
  color:  #ff0000;
  background: none;
  border: none;
  cursor: pointer;
  transition: transform 0.15s ease, color 0.2s ease;
  z-index: 1020;
  -webkit-tap-highlight-color: transparent; /* zabr√°ni modr√©mu efektu po dotyku */
}

.lightbox-content .close-lightbox:hover {
  color: #ccc;
  transform: scale(1.1);
}

#addCartPopup, #orderPopup { 
    display: none; 
    position: fixed; 
    top: 50%; 
    left: 50%; 
    transform: translate(-50%, -50%); /* <-- vycentrovan√© vertik√°lne aj horizont√°lne */
    background: #222; 
    color: #fff; 
    padding: 25px 30px; 
    border-radius: 10px; 
    box-shadow: 0 2px 15px rgba(0,0,0,0.5); 
    z-index: 1001; 
    text-align: center; 
    opacity: 0; 
    transition: opacity 0.3s ease, transform 0.3s ease; 
    max-width: 95%; 
}
#addCartPopup.show, #orderPopup.show { 
    display: block; 
    opacity: 1; 
    transform: translate(-50%, -50%); /* <-- rovnak√© ako vy≈°≈°ie */
}

#addCartPopup button, #orderPopup button { margin:5px; padding:12px 18px; font-size: 16px; border:none; border-radius:5px; cursor:pointer; }
#addCartPopup #continueShopping{background:#6772e5; color:#fff;}
#addCartPopup #goToCart{background:#0f0; color:#000;}
#orderPopup button{background:#6772e5; color:#fff;}
#contactFormContainer{ margin:40px auto; max-width:400px; text-align:center; background:#111; padding:20px; border-radius:10px; box-shadow:0 2px 5px rgba(255,255,255,0.2); }
#contactForm input, #contactForm textarea{ width:90%; padding:10px; margin:5px 0; border-radius:5px; border:none;}
#contactForm button{ padding:10px 20px; margin-top:10px; border:none; border-radius:5px; background:#6772e5; color:#fff; cursor:pointer; }
#payBtn {
    margin-top: -18px; /* zn√≠≈æi medzeru nad tlaƒçidlom */
}

#photoContainer {
  display: grid;
  grid-template-columns: repeat(4, 1fr); /* 4 fotky na riadok na PC */
  gap: 5px;
  padding: 8px;
}


@media (max-width: 768px) {
  #photoContainer {
    grid-template-columns: repeat(2, 1fr); /* 2 fotky na riadok na mobil */
    gap: 5px;
    padding: 8px;
  }
}

#photoContainer img {
  width: 100%;
  height: auto;
  border-radius: 0px;
  cursor: pointer;
  object-fit: cover;
}


#codText { font-weight:bold; font-size:16px; margin:10px 0; color:#fff; }
@media (max-width:600px){
  header img{ width: 80%; max-width:500px; height:auto; }
  .arrow{font-size:24px; padding:4px 8px;}
  .size-container select, .qty-container select{width:70%; font-size:14px;}
  .cart input, .cart select, .cart textarea{width:95%; font-size:13px;}
  .cart{max-width:90%;}
  #addCartPopup, #orderPopup{padding:12px 15px; font-size:14px;}
}
input, select, textarea {
  font-size: 16px;
}


/* Z√°kaz stiahnutia v≈°etk√Ωch obr√°zkov */
#photoContainer img,
.carousel img,
#lightbox img {
    user-select: none;           /* zak√°≈æe v√Ωber textu/obr√°zkov */
    -webkit-user-drag: none;     /* zak√°≈æe drag & drop v Safari/Chrome */
    -moz-user-select: none;      /* Firefox */
    -ms-user-select: none;       /* IE/Edge */
    -webkit-touch-callout: none; /* zak√°≈æe "Save Image" na iOS */
    pointer-events: auto;        /* obr√°zky st√°le reaguj√∫ na klik */
}

/* Lightbox anim√°cia */
.lightbox img {
  opacity: 0;
  transform: scale(0.9); /* mierne zmen≈°en√Ω */
  transition: opacity 0.4s ease, transform 0.4s ease;
}

.lightbox.show img {
  opacity: 1;
  transform: scale(1); /* dorastie na 100% */
}

.cart-modal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  pointer-events: none; /* zablokuje klikanie keƒè je skryt√Ω */
  background: rgba(0,0,0,0.7);
  transition: opacity 0.3s ease;
  z-index: 999;
}

.cart-modal.show {
  opacity: 1;
  pointer-events: auto;
}

.cart {
  background: #111;
  padding: 15px 20px;
  max-width: 350px;
  width: 80%;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(255,255,255,0.3);
  text-align: center;
  max-height: 85vh;
  overflow-y: auto;
  transform: scale(0.9);
  opacity: 0;
  transition: transform 0.3s ease, opacity 0.3s ease;
}

.cart-modal.show .cart {
  transform: scale(1);
  opacity: 1;
}

</style>
</head>
<body>

<!-- GDPR MODAL -->
<div id="gdprModal" class="cart-modal">
  <div class="cart">
    <span class="close-btn" id="closeGdpr">&times;</span>
    <h3>GDPR ‚Äì Data Protection</h3>
    We process your personal data only to handle your orders or contact you. 
    We do not share your data with third parties outside of these purposes. You have the right to request access, correction, or deletion of your data at any time.
    </p>
    <p>For more information, contact us at <strong>asitynormalny@gmail.com</strong></p>
  </div>
</div>

<header>
  <img id="logo" src="Logo.jpg" alt="Logo">
</header>


<div class="navbar">
  <button id="shopBtn">Shop</button>
  <button id="photoBtn" class="active">Photos</button>
</div>

<!-- SHOP SECTION -->
<div id="shopSection" class="section">
  <!-- Produkt 1 -->
  <div class="product">
    <h2>Blaze Kit</h2>
    <div class="carousel">
      <span class="arrow left" data-product="1">&#10094;</span>
      <img src="23.jpg" id="productImg1" alt="Triƒçko">
      <span class="arrow right" data-product="1">&#10095;</span>
    </div>
    <div class="qty-container">
      <label for="quantity1">Quantity:</label>
      <select id="quantity1">
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>
    </div>
    <p>Price: 12 ‚Ç¨</p>
    <p><strong>Blaze Naturally</strong></p>
    <div class="add-cart-row" style="display:flex; align-items:center; justify-content:center; gap:15px;">
      <button class="addToCartBtn" data-product="Blaze Kit" data-price="12" data-size="" data-qty="quantity1">Add to Cart</button>
      <div class="cart-container">
        <div class="cart-price">0 ‚Ç¨</div>
        <div class="cart-icon">üõí</div>
      </div>
    </div>
  </div>

  <!-- Produkt 2 -->
  <div class="product">
    <h2>Poster A2</h2>
    <div class="carousel">
      <span class="arrow left" data-product="2">&#10094;</span>
      <img src="23.jpg" id="productImg2" alt="Plag√°t">
      <span class="arrow right" data-product="2">&#10095;</span>
    </div>
    <div class="size-container">
      <label for="size2">Size:</label>
      <select id="size2">
        <option value="A2" selected>A2</option>
      </select>
    </div>
    <div class="qty-container">
      <label for="quantity2">Quantity:</label>
      <select id="quantity2">
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>
    </div>
    <p>Price: 8 ‚Ç¨</p>
    <p><strong>High-quality digital print on 225 g/m¬≤ matte paper.</strong></p>
    <div class="add-cart-row" style="display:flex; align-items:center; justify-content:center; gap:15px;">
      <button class="addToCartBtn" data-product="Poster" data-price="8" data-size="size2" data-qty="quantity2">Add to Cart</button>
      <div class="cart-container">
        <div class="cart-price">0 ‚Ç¨</div>
        <div class="cart-icon">üõí</div>

      </div>
    </div>
  </div>

  <!-- FORMUL√ÅR KONTAKTUJTE N√ÅS (len tu) -->
  <div id="contactFormContainer">
    <h3>Contact us</h3>
    <form id="contactForm" action="https://formspree.io/f/xeolddoa" method="POST">
      <input type="text" name="name" placeholder="Name" required>
      <input type="email" name="email" placeholder="Email address" required>
      <textarea name="message" placeholder="Message" required></textarea>
      <button type="submit">Send</button>
    </form>
    <p id="contactStatus" style="margin-top:10px;"></p>
  </div>
</div>

<!-- PHOTOS SECTION -->
<div id="photoSection" class="section active">
  <div id="photoContainer">
    <img src="8.jpg" alt="Foto1">
    <img src="8.jpg" alt="Foto1">
    <img src="ritka.jpg" alt="Foto1">
    <img src="8.jpg" alt="Foto1">
    <img src="1.jpg" alt="Foto1">
    <img src="1.jpg" alt="Foto1">
    <img src="2.jpg" alt="Foto1">
    <img src="1.jpg" alt="Foto1">
    <img src="1.jpg" alt="Foto1">
    <img src="1.jpg" alt="Foto1">
    <img src="2.jpg" alt="Foto1">
    <img src="1.jpg" alt="Foto1">
  </div>
</div>

<!-- POPUPS -->
<div id="addCartPopup">
  <p>Product added to cart successfully !</p>
  <button id="continueShopping">Continue shopping</button>
  <button id="goToCart">View cart</button>
</div>
<div id="orderPopup">
  <p>Order successfully placed !</p>
  <button id="orderOkBtn">OK</button>
</div>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox">
  <div class="lightbox-content">
    <span class="close-lightbox" id="closeLightbox">&times;</span>
    <img id="lightboxImg" src="">
  </div>
</div>

<!-- CART MODAL -->
<div class="cart-modal" id="cartModal">
  <div class="cart">
    <span class="close-btn" id="closeCart">&times;</span>
    <h3>Cart</h3>
    <div id="cartItems"></div>
    <input type="text" id="name" placeholder="Full Name">
    <input type="email" id="email" placeholder="Email">
    <input type="tel" id="phone" placeholder="Phone">
    <input type="text" id="street" placeholder="Street Address">
    <input type="text" id="city" placeholder="City">
    <input type="text" id="zip" placeholder="ZIP Code">
    <label for="country">Shipping Country:</label>
    <select id="country">
      <option value="Slovensko" selected>Slovensko</option>
      <option value="ƒåesk√° republika">ƒåesk√° republika</option>
    </select>
    <label for="delivery">
  <label for="delivery">Delivery Method (Packeta):</label>
</label>

    <select id="delivery">
      <option value="V√Ωdajn√© miesto">V√Ωdajn√© miesto</option>
      <option value="Z-Box">Z-Box</option>
    </select>

    <style>
#note {
  color: red;           /* farba textu */
}
#note::placeholder {
  color: red;           /* farba placeholderu */
  opacity: 1;           /* aby placeholder bol plne ƒçerven√Ω vo v≈°etk√Ωch prehliadaƒçoch */
}
</style>

<textarea id="note" placeholder="N√°zov v√Ωdajn√©ho miesta alebo Z-Boxu"></textarea>


    <p id="codText" style="color:green;">CASH ON DELIVERY ONLY</p>
    <p id="total"></p>

    <button id="payBtn">Order Now</button>
  </div>
</div>

<script>
/* ====== SELECTORS (jednor√°zovo) ====== */
const shopBtn = document.getElementById('shopBtn');
const photoBtn = document.getElementById('photoBtn');
const shopSection = document.getElementById('shopSection');
const photoSection = document.getElementById('photoSection');

const lightbox = document.getElementById('lightbox');
const lightboxImg = document.getElementById('lightboxImg');
const closeLightbox = document.getElementById('closeLightbox');

// Vyber v≈°etky obr√°zky, ktor√© chceme chr√°ni≈•
const protectedImages = document.querySelectorAll('#photoContainer img, .carousel img, #lightbox img');

protectedImages.forEach(img => {
  // zak√°≈æe prav√© kliknutie
  img.addEventListener('contextmenu', e => e.preventDefault());

  // zak√°≈æe drag & drop
  img.addEventListener('dragstart', e => e.preventDefault());

  // zak√°≈æe long press na mobiloch bez ovplyvnenia kliknutia
  img.addEventListener('touchstart', e => {
    img.dataset.touchStart = Date.now();
  }, { passive: true });

  img.addEventListener('touchend', e => {
    const duration = Date.now() - img.dataset.touchStart;
    if (duration > 500) { // dlh√© podr≈æanie
      e.preventDefault(); // zablokuje menu "Save image"
    }
    // kr√°tke tapy st√°le spustia click
  }, { passive: false });
});

// Kliknutie na obr√°zok (Photos + Shop) ost√°va rovnak√©
const productImages = document.querySelectorAll('.carousel img');
const photoImages = document.querySelectorAll('#photoContainer img');

[...productImages, ...photoImages].forEach(img => {
  img.addEventListener('click', () => openLightbox(img.src));
});


const cartModal = document.getElementById('cartModal');
const closeCart = document.getElementById('closeCart');

/* ====== SECTION SWITCH ====== */
function showSection(sectionToShow, sectionToHide, btnToActivate, btnToDeactivate) {
  sectionToHide.style.opacity = '0';
  setTimeout(() => {
    sectionToHide.classList.remove('active');
    sectionToHide.style.display = 'none';
    sectionToShow.style.display = 'block';
    sectionToShow.classList.add('active');
    sectionToShow.style.opacity = '0';
    requestAnimationFrame(() => {
      sectionToShow.style.opacity = '1';
    });
  }, 200);
  btnToActivate.classList.add('active');
  btnToDeactivate.classList.remove('active');
}
shopBtn.addEventListener('click', () => {
  showSection(shopSection, photoSection, shopBtn, photoBtn);
});
photoBtn.addEventListener('click', () => {
  showSection(photoSection, shopSection, photoBtn, shopBtn);
});

/* ====== LIGHTBOX (univerz√°lne pre shop + photos) ====== */
function openLightbox(src) {
  lightboxImg.src = src;
  lightbox.classList.remove('show'); // reset anim√°cie
  lightbox.style.display = 'flex';   // zobraz√≠me hneƒè
  lightboxImg.onload = () => {
    requestAnimationFrame(() => {
      lightbox.classList.add('show'); // spust√≠me fade/scale
      disableBodyScroll();
    });
  };
}


function closeLightboxFn() {
  lightbox.classList.remove('show');
  // nech√°me ƒças na CSS transition
  setTimeout(() => {
    lightbox.style.display = 'none';
    enableBodyScroll();
  }, 400);
}

// pripoj posluch√°ƒçov (shop)
productImages.forEach(img => {
  img.addEventListener('click', (e) => {
    e.stopPropagation();
    openLightbox(img.src);
  });
});

// pripoj posluch√°ƒçov (photos)
photoImages.forEach(img => {
  img.addEventListener('click', (e) => {
    e.stopPropagation();
    openLightbox(img.src);
  });
});

closeLightbox.addEventListener('click', (e) => {
  e.stopPropagation();
  closeLightboxFn();
});
lightbox.addEventListener('click', e => {
  if (e.target === lightbox) closeLightboxFn();
});

/* ====== CART (unchanged logic) ====== */
let cartData = [];
function renderCart(){
  const shipping = document.getElementById('country').value === "ƒåesk√° republika" ? 4.50 : 3.50;
  const cod = 1.40;
  const cartItems = document.getElementById('cartItems');
  const total = document.getElementById('total');
  const cartPriceElems = document.querySelectorAll('.cart-price');

  if(cartData.length === 0){
    cartItems.innerHTML = "<em>Your cart is empty</em>";
    total.innerHTML = "";
    cartPriceElems.forEach(e => e.textContent = "0 ‚Ç¨");
    return;
  }

  cartItems.innerHTML = cartData.map((i,index) =>
  `<p>${i.product}${i.size ? ' (' + i.size + ')' : ''} x${i.qty} - ${(i.price*i.qty).toFixed(2)} ‚Ç¨ 
   <span class="remove-item" data-index="${index}">‚ùå</span></p>`
  ).join('');


  const subtotal = cartData.reduce((sum,i) => sum + i.price*i.qty, 0);
  const totalPrice = (subtotal + shipping + cod).toFixed(2);
  total.innerHTML = `Subtotal: ${subtotal.toFixed(2)} ‚Ç¨<br>Shipping: ${shipping.toFixed(2)} ‚Ç¨<br>COD charge: ${cod.toFixed(2)} ‚Ç¨<br><strong>Total: ${totalPrice} ‚Ç¨</strong>`;
  cartPriceElems.forEach(e => e.textContent = subtotal.toFixed(2) + " ‚Ç¨");

  document.querySelectorAll('.remove-item').forEach(btn => {
    btn.addEventListener('click', () => {
      cartData.splice(btn.getAttribute('data-index'), 1);
      renderCart();
    });
  });
}

/* add to cart buttons */
document.querySelectorAll('.addToCartBtn').forEach(btn => {
  btn.addEventListener('click', () => {
    const product = btn.getAttribute('data-product');
    const price = parseFloat(btn.getAttribute('data-price'));
    const sizeId = btn.getAttribute('data-size');
    const size = sizeId ? document.getElementById(sizeId).value : "";
    const qty = parseInt(document.getElementById(btn.getAttribute('data-qty')).value) || 1;
    cartData.push({ product, size, price, qty });
    renderCart();
    
    const popup = document.getElementById('addCartPopup');
    popup.classList.add('show');
    disableBodyScroll(); // <-- zak√°≈æe scroll pozadia
  });
});

document.getElementById('continueShopping').addEventListener('click', () => {
  const popup = document.getElementById('addCartPopup');
  popup.classList.remove('show');
  enableBodyScroll(); // <-- obnov√≠ scroll pozadia
});

// Otvorenie ko≈°√≠ka animovane
function openCart() {
  if (cart.length === 0) {
    alert("Your cart is empty!");
    return;
  }
  renderCart();
  cartModal.classList.add('show');
  disableBodyScroll();
}

// Zatvorenie ko≈°√≠ka animovane
function closeCartFn() {
  cartModal.classList.remove('show'); // <-- tu odstr√°nime triedu show
  setTimeout(enableBodyScroll, 300); // poƒçk√°me na anim√°ciu
}

document.getElementById('goToCart').addEventListener('click', () => {
  document.getElementById('addCartPopup').classList.remove('show'); // skryje popup
  openCart(); // otvor√≠ ko≈°√≠k animovane
});
document.querySelectorAll('.cart-icon').forEach(c => c.addEventListener('click', openCart));
document.getElementById('closeCart').addEventListener('click', closeCartFn);
document.getElementById('cartModal').addEventListener('click', e => {
  if (e.target === cartModal) closeCartFn();
});

document.getElementById('country').addEventListener('change', renderCart);

/* ====== CAROUSEL (unchanged) ====== */
const productImgs = [
  ["23.jpg", "9.jpg", "10.jpg"], // product 1
  ["23.jpg", "9.jpg", "10.jpg"]  // product 2
];
let currentImgs = [0,0];

document.querySelectorAll('.arrow.left').forEach(a=>{
  a.addEventListener('click', ()=>{
    const p = parseInt(a.getAttribute('data-product')) - 1;
    currentImgs[p] = (currentImgs[p] - 1 + productImgs[p].length) % productImgs[p].length;
    document.getElementById('productImg' + (p+1)).src = productImgs[p][currentImgs[p]];
  });
});
document.querySelectorAll('.arrow.right').forEach(a=>{
  a.addEventListener('click', ()=>{
    const p = parseInt(a.getAttribute('data-product')) - 1;
    currentImgs[p] = (currentImgs[p] + 1) % productImgs[p].length;
    document.getElementById('productImg' + (p+1)).src = productImgs[p][currentImgs[p]];
  });
});

/* ====== ORDER (Formspree) ====== */
document.getElementById('payBtn').addEventListener('click', async () => {
  if (cartData.length === 0) { alert("Ko≈°√≠k je pr√°zdny!"); return; }

  const name = document.getElementById('name').value.trim();
  const email = document.getElementById('email').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const street = document.getElementById('street').value.trim();
  const city = document.getElementById('city').value.trim();
  const zip = document.getElementById('zip').value.trim();
  const country = document.getElementById('country').value;
  const note = document.getElementById('note').value.trim();
  const delivery = document.getElementById('delivery').value;

  if (!name || !email || !phone || !street || !city || !zip) { alert("Vypl≈à v≈°etky povinn√© polia!"); return; }

  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) { alert("Zadaj spr√°vny email!"); return; }

  const phoneRegex = /^(?:\+(420|421)[\s]?[0-9]{3}[\s]?[0-9]{3}[\s]?[0-9]{3}|[0-9]{9,10})$/;
  if (!phoneRegex.test(phone)) { alert("Zadaj spr√°vne telef√≥nne ƒç√≠slo: buƒè s predvoƒæbou +420/+421 a 9 ƒç√≠slic (medzery povolen√©), alebo bez predvoƒæby 9‚Äì10 ƒç√≠slic!"); return; }

  const zipRegex = /^(\d{5}|\d{3}\s\d{2})$/;
  if (!zipRegex.test(zip)) { alert("Zadaj spr√°vne PSƒå (5 ƒç√≠slic alebo 3 ƒç√≠slice + medzera + 2 ƒç√≠slice)!"); return; }

  if (!note) { alert("Vypl≈à n√°zov v√Ωdajn√©ho miesta alebo Z-Boxu!"); return; }

  const formData = new FormData();
  const productText = cartData.map(item => 
  `product: ${item.product}${item.size ? ', size: ' + item.size : ''}, price: ${item.price}, qty: ${item.qty}`
  ).join("; "); // oddeƒæuje viacer√© produkty bodkoƒçiarkou
  formData.append("product", productText);
  formData.append("name", name);
  formData.append("email", email);
  formData.append("phone", phone);
  formData.append("street", street);
  formData.append("city", city);
  formData.append("zip", zip);
  formData.append("country", country);
  formData.append("note", note);
  formData.append("delivery", delivery);
  formData.append("cod", "Dobierka");

  try {
    const response = await fetch("https://formspree.io/f/xvgbylyd", {
      method: "POST",
      body: formData,
      headers: { 'Accept': 'application/json' }
    });

    if (response.ok) {
      document.getElementById('orderPopup').classList.add('show');
      cartData = [];
      renderCart();
      ['name','email','phone','street','city','zip','note'].forEach(id => document.getElementById(id).value = "");
    } else {
      alert("Nieƒço sa pokazilo. Sk√∫ste znova.");
    }
  } catch (err) {
    alert("Chyba pri odosielan√≠ objedn√°vky.");
  }
});
document.getElementById('orderOkBtn').addEventListener('click', () => {
  document.getElementById('orderPopup').classList.remove('show');
});

/* ====== CONTACT ====== */
const contactForm = document.getElementById('contactForm');
const contactStatus = document.getElementById('contactStatus');
if (contactForm) {
  contactForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const data = new FormData(contactForm);
    try {
      const response = await fetch(contactForm.action, { method: 'POST', body: data, headers: { 'Accept': 'application/json' } });
      if (response.ok) {
        contactStatus.textContent = "Your message was sent !";
        contactStatus.style.color = "#0f0";
        contactForm.reset();
        setTimeout(() => { contactStatus.textContent = ""; }, 5000);
      } else {
        contactStatus.textContent = "Chyba pri odosielan√≠ spr√°vy. Sk√∫ste znova.";
        contactStatus.style.color = "#f00";
      }
    } catch (err) {
      contactStatus.textContent = "Chyba pri odosielan√≠ spr√°vy.";
      contactStatus.style.color = "#f00";
    }
  });
}

/* ====== PREVENT RIGHT CLICK / DRAG ON PHOTOS ====== */
[...photoImages, ...productImages].forEach(img => {
  img.addEventListener('contextmenu', e => e.preventDefault());
  img.addEventListener('dragstart', e => e.preventDefault());
});

/* ====== SCROLL TO TOP ON LOAD ====== */
window.addEventListener('load', () => {
  setTimeout(() => {
    window.scrollTo(0, 0);
  }, 50);
});

/* ====== BODY SCROLL LOCK ====== */
let scrollPosition = 0;

function disableBodyScroll() {
  scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
  document.body.style.overflow = 'hidden';
  document.body.style.touchAction = 'none'; // Safari blokuje gest√°
  document.body.dataset.scrollLock = scrollPosition; // len pre istotu
}

function enableBodyScroll() {
  document.body.style.overflow = '';
  document.body.style.touchAction = '';
  const savedPos = parseInt(document.body.dataset.scrollLock || '0', 10);
  window.scrollTo(0, savedPos);
}

/* ====== CART MODAL BEHAVIOUR ====== */
function openCart() {
  renderCart();
  cartModal.classList.add('show');
  disableBodyScroll();
}

function closeCartFn() {
  cartModal.classList.remove('show');
  setTimeout(enableBodyScroll, 300); // poƒçk√°me na anim√°ciu
}

document.querySelectorAll('.cart-icon').forEach(c => {
  c.addEventListener('click', openCart);
});

closeCart.addEventListener('click', closeCartFn);

cartModal.addEventListener('click', e => {
  if (e.target === cartModal) closeCartFn();
});

/* ====== DYNAMIC FOOTERS ====== */
// Funkcia pre Shop footer (GDPR + All rights reserved)
function addShopFooter() {
  const section = document.getElementById('shopSection');
  const footer = document.createElement('p');
  const year = new Date().getFullYear();

  // GDPR tlaƒçidlo
  const gdprBtn = document.createElement('button');
  gdprBtn.textContent = 'GDPR';
  gdprBtn.style.marginBottom = '5px';
  gdprBtn.style.display = 'inline';
  gdprBtn.style.padding = '0';          
  gdprBtn.style.border = 'none';
  gdprBtn.style.background = 'none';
  gdprBtn.style.color = '#FF0000';
  gdprBtn.style.fontWeight = '700';
  gdprBtn.style.textDecoration = 'underline';
  gdprBtn.style.fontSize = '14px';
  gdprBtn.style.cursor = 'pointer';


  gdprBtn.addEventListener('click', () => {
    document.getElementById('gdprModal').classList.add('show');
    disableBodyScroll();
  });

  footer.style.marginTop = '30px';
  footer.style.fontSize = '14px';
  footer.style.fontWeight = '700';
  footer.style.color = '#FF0000';
  footer.style.textAlign = 'center';

  footer.appendChild(gdprBtn);
  footer.appendChild(document.createElement('br')); // riadok medzi tlaƒçidlom a textom
  footer.appendChild(document.createTextNode(`¬© ${year} All rights reserved`));

  section.appendChild(footer);
}

// Funkcia pre Photos footer (len All rights reserved)
function addPhotoFooter() {
  const section = document.getElementById('photoSection');
  const footer = document.createElement('p');
  const year = new Date().getFullYear();

  footer.style.marginTop = '30px';
  footer.style.fontSize = '14px';
  footer.style.fontWeight = '700';
  footer.style.color = '#aaa';
  footer.style.textAlign = 'center';

  footer.textContent = `¬© ${year} All rights reserved`;

  section.appendChild(footer);
}

// Zavol√°me ich
addShopFooter();
addPhotoFooter();

const closeGdpr = document.getElementById('closeGdpr');
const gdprModal = document.getElementById('gdprModal');

closeGdpr.addEventListener('click', () => {
  gdprModal.classList.remove('show');
  enableBodyScroll();
});

gdprModal.addEventListener('click', e => {
  if (e.target === gdprModal) {
    gdprModal.classList.remove('show');
    enableBodyScroll();
  }
});

</script>
</body>
</html>
