<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini E-shop Asity</title>
<style>
body { font-family:sans-serif; margin:0; padding:0; background:#000; color:#fff; text-align:center;}
header { padding:15px 20px; background:#111; display:flex; justify-content:center; align-items:center; gap:20px; position:relative;}
header img { max-width:450px; height:auto; cursor:pointer; }

.navbar { display:flex; justify-content:center; gap:20px; margin:15px 0; }
.navbar button { padding:10px 20px; font-size:16px; cursor:pointer; background:#222; color:#fff; border:none; border-radius:5px; }
.navbar button.active { background:#6772e5; }

.section { display:none; }
.section.active { display:block; }

/* Produkt */
.product{margin:80px auto 30px auto; background:#111; padding:20px; max-width:400px; box-shadow:0 2px 5px rgba(255,255,255,0.2); border-radius:10px;}
.carousel{position:relative; margin-bottom:15px; display:flex; justify-content:center; align-items:center;}
.carousel img{max-width:100%; display:block; border-radius:5px; cursor:pointer;}
.arrow{position:absolute; top:50%; transform:translateY(-50%); font-size:30px; color:#fff; cursor:pointer; background:rgba(0,0,0,0.4); padding:5px 10px; border-radius:5px; user-select:none;}
.arrow.left{left:5px;} 
.arrow.right{right:5px;}

.size-container, .qty-container{margin:15px 0; text-align:center;}
.size-container select, .qty-container select{width:50%; padding:10px; font-size:16px; border-radius:5px; border:none; text-align:center;}
.product button{padding:10px 20px; font-size:16px; cursor:pointer; background:#6772e5; color:#fff; border:none; border-radius:5px; margin-top:10px;}
.cart-container { text-align:center; }
.cart-price{ font-size:14px; color:#0f0; }
.cart-icon{ font-size:24px; cursor:pointer; margin-top:5px; }

.cart-modal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:999; justify-content:center; align-items:center;}
.cart{background:#111; padding:15px 20px; max-width:350px; width:90%; border-radius:10px; box-shadow:0 2px 10px rgba(255,255,255,0.3); position:relative; text-align:center; max-height:90vh; overflow-y:auto;}
.cart input, .cart select, .cart textarea{width:90%; padding:8px; margin:5px 0; font-size:14px; border-radius:4px; border:none;}
.cart textarea{resize:vertical; min-height:50px;}
.cart button{padding:10px 16px; font-size:15px; cursor:pointer; background:#6772e5; color:#fff; border:none; border-radius:5px; margin-top:10px;}
.close-btn{position:absolute; top:10px; right:15px; font-size:20px; color:#fff; cursor:pointer;}
.remove-item{cursor:pointer; color:red; margin-left:8px; font-weight:bold;}
label{display:block; margin-top:6px;}
.lightbox{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); justify-content:center; align-items:center; z-index:1000;}
.lightbox img{max-width:90%; max-height:90%; border-radius:5px; cursor:pointer;}

/* Centr√°lne popup po pridan√≠ do ko≈°√≠ka */
#addCartPopup { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, 20px); background:#222; color:#fff; padding:15px 20px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.5); z-index:1001; text-align:center; opacity:0; transition: opacity 0.3s ease, transform 0.3s ease; max-width:90%; }
#addCartPopup.show { display:block; opacity:1; transform:translate(-50%, 0); }
#addCartPopup button{ margin:5px; padding:8px 12px; border:none; border-radius:5px; cursor:pointer; }
#addCartPopup #continueShopping{background:#6772e5; color:#fff;}
#addCartPopup #goToCart{background:#0f0; color:#000;}

/* Kontaktn√Ω formul√°r */
#contactFormContainer{ margin:40px auto; max-width:400px; text-align:center; background:#111; padding:20px; border-radius:10px; box-shadow:0 2px 5px rgba(255,255,255,0.2); }
#contactForm input, #contactForm textarea{ width:90%; padding:10px; margin:5px 0; border-radius:5px; border:none;}
#contactForm button{ padding:10px 20px; margin-top:10px; border:none; border-radius:5px; background:#6772e5; color:#fff; cursor:pointer; }

/* Photoalbum grid */
#photoContainer { display:grid; grid-template-columns:repeat(auto-fit, minmax(150px, 1fr)); gap:10px; padding:20px; }
#photoContainer img { width:100%; border-radius:5px; cursor:pointer; }

/* RESPONSIVE */
@media (max-width:600px){
  header img{ max-width:90%; height:auto; }
  .arrow{font-size:24px; padding:4px 8px;}
  .size-container select, .qty-container select{width:70%; font-size:14px;}
  .cart input, .cart select, .cart textarea{width:95%; font-size:13px;}
  .cart{max-width:95%;}
  #addCartPopup{padding:12px 15px; font-size:14px;}
}
</style>
</head>
<body>

<header>
  <img src="DWDasitynormalny.jpg" alt="Logo">
</header>

<div class="navbar">
  <button id="shopBtn">Shop</button>
  <button id="photoBtn" class="active">Photoalbum</button>
</div>

<!-- Sekcia Shop -->
<div id="shopSection" class="section">
  <div class="product">
    <h2>Shirt</h2>
    <div class="carousel">
      <span class="arrow left" id="prev">&#10094;</span>
      <img src="poster 001.jpg" id="productImg" alt="Triƒçko">
      <span class="arrow right" id="next">&#10095;</span>
    </div>
    <div class="size-container">
      <label for="size">Veƒækos≈•:</label>
      <select id="size">
        <option value="M" selected>M</option>
        <option value="L">L</option>
        <option value="XL">XL</option>
      </select>
    </div>
    <div class="qty-container">
      <label for="quantity">Poƒçet kusov:</label>
      <select id="quantity">
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
      </select>
    </div>
    <p>Cena: 23 ‚Ç¨</p>
    <p>Popis produktu: 100% cotton.</p>
    <div class="add-cart-row" style="display:flex; align-items:center; justify-content:center; gap:15px;">
      <button id="addToCart">Prida≈• do ko≈°√≠ka</button>
      <div class="cart-container">
        <div id="cartTotal" class="cart-price">0 ‚Ç¨</div>
        <div id="cartIcon" class="cart-icon">üõí</div>
      </div>
    </div>
  </div>

  <div id="addCartPopup">
    <p>Produkt bol √∫spe≈°ne pridan√Ω do ko≈°√≠ka!</p>
    <button id="continueShopping">Pokraƒçova≈• v n√°kupe</button>
    <button id="goToCart">Do ko≈°√≠ka</button>
  </div>

  <div id="contactFormContainer">
    <h3>Kontaktujte n√°s</h3>
    <form id="contactForm">
      <input type="text" name="name" placeholder="Meno" required>
      <input type="email" name="email" placeholder="Email" required>
      <textarea name="message" placeholder="Spr√°va" required></textarea>
      <button type="submit">Odosla≈•</button>
    </form>
    <p id="contactStatus" style="margin-top:10px;"></p>
  </div>

  <div class="cart-modal" id="cartModal">
    <div class="cart" id="cart">
      <span class="close-btn" id="closeCart">&times;</span>
      <h3>Ko≈°√≠k</h3>
      <div id="cartItems"></div>
      <p id="total"></p>

      <input type="text" id="name" placeholder="Meno a priezvisko">
      <input type="email" id="email" placeholder="Email">
      <input type="tel" id="phone" placeholder="Telef√≥n">
      <input type="text" id="street" placeholder="Ulica a popisn√© ƒç√≠slo">
      <input type="text" id="zip" placeholder="PSƒå">
      <textarea id="note" placeholder="N√°zov v√Ωdajn√©ho miesta alebo Z-Boxu"></textarea>

      <label for="country">Krajina doruƒçenia:</label>
      <select id="country">
        <option value="Slovensko" selected>Slovensko</option>
        <option value="ƒåesk√° republika">ƒåesk√° republika</option>
      </select>

      <label for="delivery">Packeta Sp√¥sob doruƒçenia:</label>
      <select id="delivery">
        <option value="V√Ωdajn√© miesto">V√Ωdajn√© miesto</option>
        <option value="Z-Box">Z-Box</option>
      </select>

      <label><input type="checkbox" id="cod"> Platba dobierkou (+1,40 ‚Ç¨)</label>
      <button id="payBtn">Objedna≈• s povinnos≈•ou platby</button>
    </div>
  </div>
</div>

<!-- Sekcia Photoalbum -->
<div id="photoSection" class="section active">
  <h2>Photoalbum</h2>
  <div id="photoContainer">
    <img src="1987.jpg" alt="Foto1">
    <img src="https://via.placeholder.com/300x300?text=Foto2" alt="Foto2">
    <img src="https://via.placeholder.com/300x300?text=Foto3" alt="Foto3">
    <img src="https://via.placeholder.com/300x300?text=Foto4" alt="Foto4">
    <img src="https://via.placeholder.com/300x300?text=Foto5" alt="Foto5">
    <img src="https://via.placeholder.com/300x300?text=Foto6" alt="Foto6">
  </div>
</div>

<!-- Lightbox (presunut√Ω sem, mimo sekci√≠) -->
<div class="lightbox" id="lightbox">
  <img id="lightboxImg" src="">
</div>

<script>
// Prep√≠nanie sekci√≠
const shopBtn = document.getElementById('shopBtn');
const photoBtn = document.getElementById('photoBtn');
const shopSection = document.getElementById('shopSection');
const photoSection = document.getElementById('photoSection');

shopBtn.addEventListener('click', () => {
  shopSection.classList.add('active');
  photoSection.classList.remove('active');
  shopBtn.classList.add('active');
  photoBtn.classList.remove('active');
});

photoBtn.addEventListener('click', () => {
  photoSection.classList.add('active');
  shopSection.classList.remove('active');
  photoBtn.classList.add('active');
  shopBtn.classList.remove('active');
});

// Lightbox pre Photoalbum
const photoImages = document.querySelectorAll('#photoContainer img');
const lightboxImg = document.getElementById('lightboxImg');
const lightbox = document.getElementById('lightbox');

photoImages.forEach(img => {
  img.addEventListener('click', () => {
    lightbox.style.display = 'flex';
    lightboxImg.src = img.src;
  });
});

lightbox.addEventListener('click', () => {
  lightbox.style.display = 'none';
});

// P√¥vodn√Ω JS pre carousel, ko≈°√≠k, popup, formul√°r
const images=["trikomore.jpg","0001.jpg","2006.jpg"];
let current=0;
let cartData=[];
const productImg=document.getElementById("productImg");

// Carousel
document.getElementById("prev").addEventListener("click",()=>{current=(current-1+images.length)%images.length; productImg.src=images[current];});
document.getElementById("next").addEventListener("click",()=>{current=(current+1)%images.length; productImg.src=images[current];});

// Lightbox pre Shop
productImg.addEventListener("click", ()=>{ lightbox.style.display="flex"; lightboxImg.src=productImg.src; });

// Ko≈°√≠k
const cartModal=document.getElementById("cartModal");
const cartItems=document.getElementById("cartItems");
const total=document.getElementById("total");
const closeCart=document.getElementById("closeCart");
const cartIcon=document.getElementById("cartIcon");
const cartTotal=document.getElementById("cartTotal");
const countrySelect=document.getElementById("country");
const codCheckbox=document.getElementById("cod");

function getShipping(){ return countrySelect.value==="ƒåesk√° republika"?4.50:3.50; }
function getCOD(){ return codCheckbox.checked?1.40:0; }

function renderCart(){
  const shipping=getShipping();
  const cod=getCOD();
  if(cartData.length===0){
    cartItems.innerHTML="<em>Ko≈°√≠k je pr√°zdny</em>";
    total.innerHTML="";
    cartTotal.textContent="0 ‚Ç¨";
    return;
  }
  cartItems.innerHTML=cartData.map((item,index)=>
    `<p>${item.product} (${item.size}) x${item.qty} - ${(item.price*item.qty).toFixed(2)} ‚Ç¨ <span class="remove-item" data-index="${index}">‚ùå</span></p>`).join('');
  const subtotal=cartData.reduce((sum,i)=>sum+i.price*i.qty,0);
  const totalPrice=(subtotal+shipping+cod).toFixed(2);
  total.innerHTML=`Medzis√∫ƒçet: ${subtotal.toFixed(2)} ‚Ç¨<br>Po≈°tovn√©: ${shipping.toFixed(2)} ‚Ç¨<br>Dobierka: ${cod.toFixed(2)} ‚Ç¨<br><strong>Celkom: ${totalPrice} ‚Ç¨</strong>`;
  cartTotal.textContent=subtotal.toFixed(2)+" ‚Ç¨";

  document.querySelectorAll(".remove-item").forEach(btn=>{
    btn.addEventListener("click",()=>{
      const index=btn.getAttribute("data-index");
      cartData.splice(index,1);
      renderCart();
    });
  });
}

cartIcon.addEventListener("click",()=>{ renderCart(); cartModal.style.display="flex"; });
closeCart.addEventListener("click",()=>{ cartModal.style.display="none"; });
cartModal.addEventListener("click",(e)=>{ if(e.target===cartModal) cartModal.style.display="none"; });

// Centr√°lne popup
const addCartPopup = document.getElementById("addCartPopup");
const continueShopping = document.getElementById("continueShopping");
const goToCart = document.getElementById("goToCart");

document.getElementById("addToCart").addEventListener("click", () => {
  const size = document.getElementById("size").value;
  const qty = parseInt(document.getElementById("quantity").value) || 1;

  cartData.push({ product: "Triƒçko", size: size, price: 23, qty: qty });
  renderCart();

  addCartPopup.classList.add("show");
});

// Pokraƒçova≈• v n√°kupe
continueShopping.addEventListener("click", () => { addCartPopup.classList.remove("show"); });

// Prejs≈• do ko≈°√≠ka
goToCart.addEventListener("click", () => { renderCart(); cartModal.style.display = "flex"; addCartPopup.classList.remove("show"); });

countrySelect.addEventListener("change", renderCart);
codCheckbox.addEventListener("change", renderCart);

// Odosielanie objedn√°vky cez Formspree
const payBtn=document.getElementById("payBtn");
payBtn.addEventListener("click", async ()=>{
  if(cartData.length===0){ alert("Ko≈°√≠k je pr√°zdny!"); return; }
  if(!codCheckbox.checked){ alert("Objedn√°vka mus√≠ by≈• na dobierku!"); return; }

  const name=document.getElementById("name").value.trim();
  const email=document.getElementById("email").value.trim();
  const phone=document.getElementById("phone").value.trim();
  const street=document.getElementById("street").value.trim();
  const zip=document.getElementById("zip").value.trim();
  const country  =document.getElementById("country").value;
  const note=document.getElementById("note").value.trim();
  const delivery=document.getElementById("delivery").value;

  if(!name||!email||!phone||!street||!zip){ alert("Vypl≈à v≈°etky povinn√© polia!"); return; }

  const formData = new FormData();
  formData.append("product", JSON.stringify(cartData));
  formData.append("name", name);
  formData.append("email", email);
  formData.append("phone", phone);
  formData.append("street", street);
  formData.append("zip", zip);
  formData.append("country", country);
  formData.append("note", note);
  formData.append("delivery", delivery);
  formData.append("cod", codCheckbox.checked ? "√Åno" : "Nie");

  try {
    const response = await fetch("https://formspree.io/f/xvgbylyd", {
      method: "POST",
      body: formData,
      headers: { 'Accept': 'application/json' }
    });
    if(response.ok){
      alert("Objedn√°vka bola odoslan√°!");
      cartData=[];
      renderCart();
      document.getElementById("name").value="";
      document.getElementById("email").value="";
      document.getElementById("phone").value="";
      document.getElementById("street").value="";
      document.getElementById("zip").value="";
      document.getElementById("note").value="";
    } else {
      alert("Nieƒço sa pokazilo. Sk√∫ste znova.");
    }
  } catch(err){
    alert("Chyba pri odosielan√≠ objedn√°vky.");
  }
});

// Kontakt cez Formspree
const contactForm = document.getElementById("contactForm");
const contactStatus = document.getElementById("contactStatus");

contactForm.addEventListener("submit", async (e) => {
  e.preventDefault();
  const formData = new FormData(contactForm);
  try {
    const response = await fetch("https://formspree.io/f/xeolddoa", { 
      method: "POST",
      body: formData,
      headers: { 'Accept': 'application/json' }
    });
    if (response.ok){
      contactStatus.textContent = "Spr√°va bola √∫spe≈°ne odoslan√°!";
      contactStatus.style.color = "#0f0";
      contactForm.reset();
      setTimeout(() => { contactStatus.textContent = ""; }, 3000);
    } else {
      contactStatus.textContent = "Chyba pri odosielan√≠ spr√°vy. Sk√∫ste znova.";
      contactStatus.style.color = "#f00";
    }
  } catch(err) {
    contactStatus.textContent = "Chyba pri odosielan√≠ spr√°vy.";
    contactStatus.style.color = "#f00";
  }
});
</script>

</body>
</html>
